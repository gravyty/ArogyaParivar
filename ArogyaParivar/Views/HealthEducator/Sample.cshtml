@{
    ViewBag.Title = "Changephoto";
    Layout = "~/Views/Shared/_ArogyaParivarLayout.cshtml";
}

<script type="text/javascript">
    function UploadPic() {
        $.ajax({
            type: 'POST',
            url: ("@Url.Content("~/Photo/Rebind")/"),
            dataType: 'json',
            success: function (data) {
                $("#show").attr("src", data);
                document.getElementById('Submit1').disabled = false;
                alert("Photo Capture successfully!");
            }
        });
    }

    function Uploadsubmit() {
        var src = $('img').attr('src');
        src_array = src.split('/');
        src = src_array[4];
        if (src != "") {
            $.ajax({
                type: 'POST',
                url: ("@Url.Content("~/HealthEducator/PatientRegistration")/"),
                dataType: 'json',
                data: { Imagename: src },
                success: function () { }
            });
            window.opene.href = "http://localhost:55694/HealthEducator/Changephoto";
            self.close();
        }
    }
</script>
@using (Html.BeginForm())
{

    
    
             
    <section class="content-header">
        <h1>Patient Registration</h1>
    </section>
    <section class="content">
        <div class="box box-info">
            <div class="box-header">
                <h3 class="box-title"><i class="fa fa-user"></i>Patient info</h3>
                <div class="box-tools pull-right">
                    <div class="time-label bg-red" style="padding: 5px 10px">Arogya ID : AROGYA0000001</div>
                </div>
            </div>
            <div class="box-body">
                <div class="row" style="padding: 10px">
                    <div class="col-lg-12">
                        <section class="col-lg-8 col-sm-8 ">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Patient Name</label>
                                        <div class="col-sm-7">
                                            @*       @Html.TextBoxFor(model => model.PatientName, new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.PatientName)*@
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">SurName</label>
                                        <div class="col-sm-7">
                                            @*   @Html.TextBoxFor(model => model.Surname, null, new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.Surname)*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Date Of Birth</label>
                                        <div class="col-sm-7">

                                            @* @Html.TextBoxFor(model => model.DOB, null, new { @class = "form-control", @placeholder = "MM/DD/YYYY" })
                                                @Html.ValidationMessageFor(model => model.Age)*@
                                            month and year dropdown
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Age</label>
                                        <div class="col-sm-7">
                                            @*     @Html.TextBoxFor(model => model.Age, null, new { @class = "form-control" })*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Gender</label>
                                        <div class="col-sm-7">
                                            @*     @Html.DropDownList("Gender", new SelectList(string.Empty, "Value", "Text"), "Please select a Gender", new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.Gender)*@

                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Aadhaar No.</label>
                                        <div class="col-sm-7">
                                            @*        @Html.TextBoxFor(model => model.AadharID, null, new { @class = "form-control" })
                                                @Html.ValidationMessageFor(model => model.AadharID)*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-5 control-label-left">Address</label>
                                        <div class="col-sm-7">
                                            @*       @Html.TextBoxFor(model => model.Address, null, new { @class = "form-control" })
                                            </div>*@
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">Village</label>
                                            <div class="col-sm-7">

                                                @*                                                @Html.DropDownList("Village", new SelectList(string.Empty, "Value", "Text"), "Please select a Village", new { @class = "form-control" })*@

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">Town</label>
                                            <div class="col-sm-7">

                                                @*   @Html.DropDownList("Mandal", new SelectList(string.Empty, "Value", "Text"), "Please select a town", new { id = "Mandal", @class = "form-control" })*@

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">District</label>
                                            <div class="col-sm-7">
                                                @*                                                @Html.DropDownList("city", new SelectList(string.Empty, "Value", "Text"), "Please select a district", new { id = "city", @class = "form-control" })*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">State</label>
                                            <div class="col-sm-7">
                                                @*                                                @Html.DropDownListFor(model => model.Sate, new SelectList(string.Empty, "Value", "Text"), "Select a State", new { id = "State", @class = "form-control" })*@
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">Contact Number</label>
                                            <div class="col-sm-7">
                                                @*   @Html.TextBoxFor(model => model.ContactNo, null, new { @class = "form-control" })*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">referred by</label>
                                            <div class="col-sm-7">
                                                @*  @Html.DropDownList("RefBy", new SelectList(string.Empty, "Value", "Text"), "Please select a Ref", new { @class = "form-control" })*@

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label-left">Consent text</label>
                                            <div class="col-sm-7">
                                                @* @Html.TextBoxFor(model => model.Consent, null, new { @class = "form-control" })*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </section>
                        <section class="col-lg-4 col-sm-4">
                            <div style="margin: 0 auto; width: 980px; text-align: center">
                                <div style="float: left; border: 4px solid #ccc; padding: 5px">
                                    <div id="Camera">
                                    </div>
                                    <br>
                                    <input type="button" value="Capture" onclick="webcam.onCapture();" />
                                </div>
                                <div style="float: left; margin-left: 20px; border: 4px solid #ccc; padding: 5px">
                                    <img id="show" style="width: 320px; height: 240px;" src="../../WebImages/person.jpg" />
                                    <br>
                                    <br>
                                    <input id="Submit1" type="submit" onclick="Uploadsubmit();" value="submit" />
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                <div class="row" style="padding: 10px">
                    <div class="col-lg-12 text-right">
                        <input id="submit" type="submit" name="command" value="Submit" class="btn btn-warning" />
                        <input id="Button3" type="submit" value="Print ID card" class="btn btn-warning" />
                        <input id="Button2" type="submit" value="Reset" class="btn btn-warning" />
                    </div>
                </div>
            </div>
            <!-- /.box-body -->

        </div>
        <!-- /.box -->
    </section>
    

    
}
<script type="text/javascript">
    window.onload = load();

    function load() {
        document.getElementById('Submit1').disabled = true;
    }

</script>
<script src="/Scripts/jquery-1.7.1.js"></script>


<script src="/Scripts/jquery.webcam.js">
</script>
<script type="text/javascript">
    function Pic() {
        $("#Camera").webcam({
            width: 320,
            height: 240,
            mode: "save",
            swffile: "/Scripts/jscam.swf",
            onTick: function () { },
            onSave: function () {
                UploadPic();
            },
            capture: function () {
                webcam.onSave("/Photo/WebImages/");
            },
            debug: function () { },
            onLoad: function () { }

        });
    }

</script>
